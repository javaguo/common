<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tgw.dao.example.ExampleBeanMapper">

	<select id="searchData" parameterType="com.tgw.bean.example.ExampleBean"  resultType="map">
select exam.id,
			exam.form_hidden formHidden,
			exam.form_text formText,
			exam.form_text_area formTextArea,

			exam.form_number_short formNumberShort,
			exam.form_number_integer formNumberInteger,
			exam.form_number_long formNumberLong,
			exam.form_number_float formNumberFloat,
			exam.form_number_double formNumberDouble,
			exam.form_boolean formBoolean,

      		exam.form_tag_json formTagJson,
			exam.form_tag_sql formTagSql,

			exam.form_date_string formDateString,
			date_format(exam.form_date_date, '%Y-%m-%d') formDateDate,
			exam.form_datetime_string formDatetimeString,
			date_format(exam.form_datetime_date, '%Y-%m-%d %H:%i:%s') formDatetimeDate,

			exam.form_radio formRadio,
			exam.form_checkbox formCheckbox,


			disComboBoxSql.name formComboBoxSql,
			disComboBoxCascadeA.name formComboBoxCascadeA,
			disComboBoxCascadeB.name formComboBoxCascadeB,
			disComboBoxCascade1.name formComboBoxCascade1,
			disComboBoxCascade2.name formComboBoxCascade2,
			disComboBoxCascade3.name formComboBoxCascade3,

		    exam.form_combo_box_tree1 formComboBoxTree1,
			exam.form_combo_box_tree2 formComboBoxTree2,
			exam.form_combo_box_tree3 formComboBoxTree3,
			exam.form_combo_box_tree4 formComboBoxTree4,
			exam.form_combo_box_tree5 formComboBoxTree5,
			exam.form_combo_box_tree6 formComboBoxTree6,

			exam.form_html_editor formHtmlEditor,

			exam.form_file1_orig_file_name formFile1OrigFileName,
			exam.form_file2_orig_file_name formFile2OrigFileName,
			exam.form_file3_orig_file_name formFile3OrigFileName,

			exam.form_display formDisplay,

			date_format(exam.insert_time, '%Y-%m-%d %H:%i:%s') insertTime,
			date_format(exam.update_time, '%Y-%m-%d %H:%i:%s') updateTime
 from example_bean exam
   LEFT JOIN example_bean_tree disComboBoxSql on exam.form_combo_box_sql = disComboBoxSql.id
   LEFT JOIN example_bean_tree disComboBoxCascadeA on exam.form_combo_box_cascade_a = disComboBoxCascadeA.id
	 LEFT JOIN example_bean_tree disComboBoxCascadeB on exam.form_combo_box_cascade_b = disComboBoxCascadeB.id
	 LEFT JOIN example_bean_tree disComboBoxCascade1 on exam.form_combo_box_cascade1 = disComboBoxCascade1.id
	 LEFT JOIN example_bean_tree disComboBoxCascade2 on exam.form_combo_box_cascade2 = disComboBoxCascade2.id
	 LEFT JOIN example_bean_tree disComboBoxCascade3 on exam.form_combo_box_cascade3 = disComboBoxCascade3.id
order by exam.update_time desc
	</select>

	<select id="loadComboboxData"  resultType="map">
		select menu.id,menu.text name
		from sys_en_menu menu
		<where>
			<if test="value!=null">
				menu.fk_parent_id = #{value}
			</if>
		</where>
	</select>

	<select id="queryMenuComboBoxMap"  resultType="map">
		select menu.id,menu.text name
		from sys_en_menu menu
		<where>
			<if test="value!=null">
				menu.fk_parent_id = #{value}
			</if>
		</where>
	</select>

	<select id="queryDistrictComboBoxMap"  resultType="map">
		select tree.id,tree.name
		from example_bean_tree tree
		<where>
			<if test="value!=null">
				tree.parent_id = #{value}
			</if>
			<if test="value==null">
				tree.parent_id  is null
			</if>
		</where>
	</select>

	<select id="queryMenuTreeMap"  resultType="map">
		select menu.id,menu.text,menu.fk_parent_id,
			    menu.expanded,menu.is_self_url
 		from sys_re_role_menu rm,sys_en_role role,sys_en_menu menu
		where rm.fk_role_id = role.id
    	  and rm.fk_menu_id = menu.id
	</select>

	<select id="queryDistrictTreeMap"  resultType="map">
		select tree.id,tree.name,tree.parent_id
		from example_bean_tree tree
	</select>
</mapper>
